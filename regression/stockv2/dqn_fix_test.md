
# 测试结果：

## 20200312
### 静态设置
| key                    | value        |
| ---------------------- | -------------|
| code_release_end_date  | 20000101     |
| code_sample_step       | 1            |
| start_date             | 20000101     |
| end_date               | 20200306     |
| split_date             | 20100101     |
| feature                | FUT_D5_NORM  |

### 动态属性
| feature_days  | label_days | decay_ratio | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| ------------- | ---------- | ----------- | ----- | ------- | ------- | -------- | ------- | ------ |
| 10            | 20         | 0.9         | 300   | 5.71    | 41      | 0.53     | 674     | 1583   |
| 10            | 10         | 0.8         | 200   | 15.73   | 104760  | 0.45     | 820     | 1329   |
| 10            | 7          | 0.7         | 200   | 15.38   | 105381  | 0.49     | 671     | 973    |
| 10            | 6          | 0.6         | 200   | 15.90   | 177796  | 0.62     | 651     | 870    |
| 7             | 7          | 0.7         | 200   | 19.27   | 4291420 | 0.40     | 477     | 725    |
| 7             | 6          | 0.6         | 100   | 21.93   | 25121859| 0.36     | 449     | 680    |
| 7             | 5          | 0.5         | 250   | 18.46   | 1867520 | 0.41     | 487     | 657    |
| 5             | 6          | 0.6         | 100   | 20.84   | 14094698| 0.49     | 459     | 695    |

#### 对比测试 - feature FUT_D7_NORM
| feature           | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| ----------------- | ----- | ------- | ------- | -------- | ------- | ------ |
| FUT_D7_NORM       | 250   | 21.96   | 13863622| 0.58     | 713     | 1087   |
| FUT_D9_NORM       | 50    | 20.19   | 1717896 | 0.53     | 716     | 1063   |
| FUT_D13_NORM_MF   | 200   | 15.66   | 9.72 E4 | 0.48     | 274     | 456    |

Note: FUT_D13_NORM_MF test data 从 20150101 开始 

#### 对比测试 - feature FUT_D9_NORM
| feature_days  | label_days | decay_ratio | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| ------------- | ---------- | ----------- | ----- | ------- | ------- | -------- | ------- | ------ |
| 7             | 6          | 0.6         | 50    | 20.19   | 1717896 | 0.53     | 716     | 1063   |

#### 对比测试 - dqn_fix label 线性衰减
| feature_days  | label_days | decay_ratio | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| ------------- | ---------- | ----------- | ----- | ------- | ------- | -------- | ------- | ------ |
| 7             | 6          | 0.185       | 100   | 19.09   | 1900556 | 0.40     | 479     | 724    |

#### 对比测试 - dqn_fix label 线性衰减， 训练label - open_increase
| feature_days  | label_days | decay_ratio | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| ------------- | ---------- | ----------- | ----- | ------- | ------- | -------- | ------- | ------ |
| 7             | 6          | 0.185       | 200   | 8.11    | 537     | 0.60     | 826     | 1030   |

#### 对比测试 - lstm size

| key                    | value        |
| ---------------------- | -------------|
| feature_days           | 7            |
| label_days             | 6            |
| decay_ratio            | 0.6          |

| lstm size | epoch | sum_inc | capital | capi_MDD | trd_cnt | h_days |
| --------- | ----- | ------- | ------- | -------- | ------- | ------ |
| 32        | 150   | 12.73   | 13061   | 0.62     | 406     | 601    |
| 64        | 100   |    |              | 0.62     | 406     | 601    |
| 96        | 50    | 16.36   | 169712  | 0.64     | 552     | 774    |

#### 对比测试 - learning rate
| lr        | epoch | sum_inc | capital   | capi_MDD | trd_cnt | h_days |
| --------- | ----- | ------- | --------- | -------- | ------- | ------ |
| 0.01      | 100   | 21.93   | 2512 W    | 0.36     | 449     | 680    |
| 0.02      | 150   | 26.60   | 56309 W   | 0.39     | 492     | 749    |
| 0.03      | 150   | 27.17   | 194877 W  | 0.31     | 371     | 664    |

#### 对比测试 - batch
| batch_size | lr        | epoch | sum_inc | capital   | capi_MDD | trd_cnt | h_days |
| ---------- | --------- | ----- | ------- | --------- | -------- | ------- | ------ |
| 10240      | 0.03      | 150   | 27.17   | 194877 W  | 0.31     | 371     | 664    |
| 1024       | 0.03      | 250   | 15.74   | 73 W      | 0.27     | 164     | 284    |
| 1024       | 0.004     | 250   | 18.58   | 235 W     | 0.52     | 589     | 851    |
| 256        | 0.03      | --    | 0       | 0         | 0        | 0       | 0      |
| 40960      | 0.03      | 500   | 30.95   | 383 e8    | 0.54     | 557     | 878    |
| 40960      | 0.06      | 500   | 26.21   | 6 e8      | 0.71     | 283     | 573    |

#### Predict batch_size 对比测试
batch_size 1 和 10240 结果一致

#### 损失函数对比测试
| loss       | epoch | sum_inc | capital   | capi_MDD | trd_cnt | h_days |
| ---------- | ----- | ------- | --------- | -------- | ------- | ------ |
| tanhmap0-10| 150   | 27.17   | 194877 W  | 0.31     | 371     | 664    |
| tanhmap0-15| 200   | 22.54   | 4502 W    | 0.43     | 636     | 958    |
| tanhmap0-7 | 100   | 25.35   | 1.99E+08  | 0.56     | 373     | 649    |

#### 网络对比测试
| net        | epoch | sum_inc | capital   | capi_MDD | trd_cnt | h_days |
| ---------- | ----- | ------- | --------- | -------- | ------- | ------ |
| lstm 64    | 150   | 27.17   | 194877 W  | 0.31     | 371     | 664    |
| rnn 64     | 200   | 22.54   | 4502 W    | 0.43     | 636     | 958    |